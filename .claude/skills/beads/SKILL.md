---
name: beads
description: Manage issues using the beads CLI (bd). Use when adding issues, updating status, marking items done, listing by label/status, or tracking work items.
allowed-tools: Bash(bd:*)
---

# Managing Issues with Beads

## IMPORTANT: Never Edit .beads/ Directly

**DO NOT use the Edit or Write tools to modify files in `.beads/`.** Always use the `bd` CLI commands. The database and JSONL files are managed automatically.

## Quick Reference

```bash
# Find available work
bd ready                              # Unblocked tasks ready to work on
bd ready --json                       # JSON output for scripting

# List and filter issues
bd list                               # All open issues
bd list --status closed               # Closed issues
bd list --label API                   # Filter by category label
bd list --label size-s                # Filter by effort
bd list --json                        # JSON output

# Create issues
bd create "[UI-NNN] Description" -t task -p 1 -l UI,size-m
bd create "[API-NNN] Description" -t task -p 0 -l API,size-s

# Update issues
bd update VSS-abc --status in_progress
bd update VSS-abc --priority 0
bd label add VSS-abc size-l           # Add label
bd label remove VSS-abc size-m        # Remove label

# Close issues
bd close VSS-abc --reason "PR: https://github.com/org/repo/pull/99"
bd close VSS-abc --reason "Fixed in commit abc123"

# Show issue details
bd show VSS-abc                       # Human-readable
bd show VSS-abc --json                # JSON output
```

## Convention Mappings

### Categories (Labels)
| Label | Description |
|-------|-------------|
| `UI` | Frontend/web UI items |
| `API` | Backend API items |
| `INFRA` | Infrastructure/Docker/deployment |
| `TOOLS` | Development tooling/scripts |
| `CICD` | CI/CD pipeline items |

### Effort Sizing (Labels)
| Label | Description |
|-------|-------------|
| `size-s` | Small (less than 1 hour) |
| `size-m` | Medium (1-4 hours) |
| `size-l` | Large (4+ hours) |

### Priority (Numeric)
| Value | Meaning |
|-------|---------|
| `0` | High - Impacts usability or correctness |
| `1` | Medium - Noticeable improvement |
| `2` | Low - Nice-to-have |

### Status
| Status | Description |
|--------|-------------|
| `open` | Not started |
| `in_progress` | Currently being worked on |
| `closed` | Completed |

### ID Convention

**Two ID systems coexist:**

1. **Beads ID** (e.g., `VSS-abc`): Auto-generated by beads, used for all `bd` commands
2. **Legacy ID** (e.g., `[UI-029]`): Preserved in issue titles from the pre-beads polish backlog

When referencing issues:
- Use the **beads ID** (`VSS-abc`) for `bd update`, `bd close`, etc.
- Use the **legacy ID** (`[UI-029]`) to find issues by category sequence

Example title: `[UI-029] Fix button alignment` - the beads ID might be `VSS-x7k`

## Common Workflows

### Discovering an Issue During Development

```bash
# Add to backlog instead of fixing immediately
bd create "[UI-045] Button alignment off on mobile" -t task -p 2 -l UI,size-s
```

### Starting Work on an Issue

```bash
# Find something to work on
bd ready

# Mark as in-progress
bd update VSS-abc --status in_progress
```

### Completing an Issue

```bash
# Close with PR link
bd close VSS-abc --reason "PR: https://github.com/craquehouse/vintagestory-server/pull/50"

# Close without PR (small fix)
bd close VSS-abc --reason "Fixed directly"
```

### Finding Next ID for a Category

To maintain the legacy ID sequence when creating new issues:

```bash
# Find highest existing ID for a category
bd list --label UI --json | jq -r '.[].title' | grep -o '\[UI-[0-9]*\]' | sort -t- -k2 -n | tail -1
```

### Reviewing Available Work

```bash
# High priority items
bd list --json | jq '.[] | select(.priority == 0)'

# API items that are open
bd list --label API --status open

# What's currently in progress
bd list --status in_progress
```

## Create Command Details

```bash
bd create "<title>" -t <type> -p <priority> -l <labels>
```

- **title** (required): Include `[CATEGORY-NNN]` prefix for tracking
- **-t type** (required): Usually `task`
- **-p priority** (required): 0 (high), 1 (medium), or 2 (low)
- **-l labels** (optional): Comma-separated labels (category, effort)

Examples:

```bash
# Minimal
bd create "[API-016] Add pagination" -t task -p 1

# With category and effort labels
bd create "[UI-046] Fix tooltip positioning" -t task -p 2 -l UI,size-s

# High priority with notes in description
bd create "[INFRA-008] Add health check retries" -t task -p 0 -l INFRA,size-m
```

## File Location

Beads data is stored in `.beads/`:

**Committed to git:**
- `issues.jsonl` - All issue data (source of truth)
- `config.yaml` - Repository configuration
- `README.md` - Beads documentation

**Gitignored (local only):**
- `beads.db`, `beads.db-shm`, `beads.db-wal` - SQLite cache
- `daemon.log`, `daemon.pid`, `daemon.lock`, `bd.sock` - Daemon runtime
- `.local_version` - Version tracking

## Migration Note

This project migrated from `polish-backlog.md` (markdown tables) to beads on 2026-01-18.
- All 69 items (47 active + 22 archived) were migrated with preserved IDs
- Legacy commands (`just polish`) are no longer available
- The archived file is at `_bmad-output/implementation-artifacts/polish-backlog.md.archived`
